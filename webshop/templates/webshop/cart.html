{% extends 'webshop/base.html' %}

{% load static %}

{% block title %}Košarica{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'webshop/css/cart.css' %}">
{% endblock %}

{% block content %}
<div class="cart-container">
    <h1>Košarica</h1>
    
    <div class="cart-items">
        {% if cart.items_in_cart.count %}
            <ul>
                {% for item in cart.items_in_cart.all %}
                    <li>{{ item.product.product.name }} - {{ item.quantity }}</li>
                {% endfor %}
            </ul>
        {% else %}
            <p>Your cart is empty.</p>
        {% endif %}
    </div>

    <form action="{% url 'webshop:create_order' %}" method="post">
        {% csrf_token %}
        <div class="delivery-info">
            <h2>Delivery Information</h2>
            <p><strong>Name:</strong> {{ request.user.account.name }}</p>
            <p><strong>Surname:</strong> {{ request.user.account.surname }}</p>
            <p><strong>Address:</strong> {{ request.user.account.street }}</p>
            <p><strong>House Number:</strong> {{ request.user.account.house_number }}</p>
            <p><strong>Postal Code:</strong> {{ request.user.account.postal_number }}</p>
            <p><strong>City:</strong> {{ request.user.account.city }}</p>
            <p><strong>Phone:</strong> {{ request.user.account.phone }}</p>
            <p><strong>Email:</strong> {{ request.user.account.email }}</p>
            
            <h3>Payment Method</h3>
            <label><input type="radio" name="payment_method" value="PP"> Plaćanje pouzećem</label><br>
            <label>Internetsko Bankarstvo</label><br>
            
            <h3>Summary</h3>
            <p><strong>Subtotal:</strong> €{{ subtotal }}</p>
            <p><strong>Delivery Cost:</strong> €{{ delivery_cost }}</p>
            <p><strong>Total Price:</strong> €{{ total_price }}</p>
            
            <button type="submit">Naruči</button>
        </div>
    </form>
</div>
{% endblock %}